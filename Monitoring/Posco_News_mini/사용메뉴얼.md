# 📰 POSCO 뉴스 모니터 사용 메뉴얼

## 🚀 시작하기 전에

### 1. Dooray 웹훅 설정
1. Dooray 프로젝트 > 설정 > 서비스 연동 > Incoming Webhook
2. 새 웹훅 생성 후 URL 복사
3. `config.py` 파일에서 `DOORAY_WEBHOOK_URL` 수정

```python
DOORAY_WEBHOOK_URL = "https://hook.dooray.com/services/YOUR_WEBHOOK_TOKEN_HERE"
```

### 2. 체크 간격 설정 (선택사항)
`config.py`에서 모니터링 간격 변경 가능:
```python
MONITOR_CONFIG = {
    "check_interval_minutes": 30,  # 30분 간격으로 변경
}
```

---

## 📋 사용 방법

### 🔍 1. 필요할 때 바로 1회 체크

**방법 1: Kiro에서 직접 실행**
- `check_once.py` 파일을 열고 실행 버튼 클릭

**방법 2: 터미널에서 실행**
```bash
cd Monitoring/Posco_News_mini
python check_once.py
```

**결과:**
- 변경사항 있음: 각 뉴스 타입별 개별 알림 전송
- 변경사항 없음: "상태 정상" 녹색 알림 전송

---

### 🔄 2. 30분 단위로 계속 체크하게 돌아가도록 설정

**방법 1: 기본 30분 간격**
```bash
cd Monitoring/Posco_News_mini
python run_monitor.py 2
```

**방법 2: 사용자 정의 간격**
1. `config.py`에서 간격 수정:
```python
"check_interval_minutes": 30,  # 원하는 분 단위
```

2. 실행:
```bash
python run_monitor.py 2
```

**실행 중 화면:**
```
[START] POSCO 뉴스 모니터 시작
==================================================
실행 모드: 2
1. 한 번만 체크
2. 지속적 모니터링
3. 테스트 알림 전송

[MONITOR] 지속적 모니터링 시작 (30분 간격)
중단하려면 Ctrl+C를 누르세요
🔍 뉴스 데이터 체크 중... 2025-07-24 16:50:00
✅ 상태 정상 알림 전송 성공
⏰ 30분 후 다시 체크...
```

---

### 🛑 3. 알림 중단

**터미널에서 실행 중인 경우:**
- `Ctrl + C` 키 조합으로 중단

**백그라운드에서 실행 중인 경우:**
```bash
# 프로세스 찾기
tasklist | findstr python

# 프로세스 종료 (PID 번호 확인 후)
taskkill /PID [프로세스번호] /F
```

**중단 시 알림:**
- "POSCO 뉴스 모니터링 중단" 빨간색 알림 자동 전송

---

## 🎯 빠른 실행 가이드

### 즉시 체크
```bash
python check_once.py
```

### 30분 간격 모니터링 시작
```bash
python run_monitor.py 2
```

### 테스트 알림
```bash
python test_webhook.py
```

---

## 📱 알림 종류

### 1. 상태 정상 (녹색)
- 변경사항이 없을 때
- 체크 시간 포함

### 2. 뉴스 업데이트 (파란색)
각 뉴스 타입별 개별 알림:
- 💱 **EXCHANGE-RATE**: 환율 뉴스
- 🗽 **NEWYORK-MARKET-WATCH**: 뉴욕시장 뉴스  
- 📈 **KOSPI-CLOSE**: 코스피 뉴스

### 3. 오류 알림 (빨간색)
- API 호출 실패
- 네트워크 오류
- 모니터링 중단

---

## 🔧 고급 설정

### 체크 간격 변경
`config.py` 수정:
```python
MONITOR_CONFIG = {
    "check_interval_minutes": 15,  # 15분 간격
    "enable_startup_notification": True,   # 시작 알림
    "enable_error_notification": True      # 오류 알림
}
```

### 알림 설정
- 시작 알림 끄기: `"enable_startup_notification": False`
- 오류 알림 끄기: `"enable_error_notification": False`

---

## ❓ 문제 해결

### 웹훅 테스트
```bash
python test_webhook.py
```

### 로그 확인
실행 시 터미널에서 상태 메시지 확인:
- ✅ 성공: 녹색 체크 표시
- ❌ 실패: 빨간색 오류 메시지

### 캐시 초기화
문제 발생 시 캐시 파일 삭제:
```bash
del posco_news_cache.json
```

---

## 📞 지원

문제 발생 시:
1. 웹훅 URL 확인
2. 네트워크 연결 확인  
3. 캐시 파일 삭제 후 재시도
4. 로그 메시지 확인

---

**🎉 이제 POSCO 뉴스 변경사항을 실시간으로 모니터링할 수 있습니다!**