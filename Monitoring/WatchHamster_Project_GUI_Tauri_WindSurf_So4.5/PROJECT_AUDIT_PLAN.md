# 🔍 WatchHamster 프로젝트 전수검사 및 최적화 계획

## 📋 목표

멀티 테넌트 시스템으로 전환된 WatchHamster 프로젝트의 전체 코드베이스를 검사하고 최적화합니다.

---

## 🎯 검사 범위

### 1. 프로젝트 구조 분석 ✓
- [ ] 전체 파일 인벤토리 작성
- [ ] 디렉토리 구조 검증
- [ ] 파일 역할 및 의존성 매핑
- [ ] 중복 파일 식별

### 2. 백엔드 검증
- [ ] API 엔드포인트 전수 검사
- [ ] 라우터 등록 상태 확인
- [ ] 데이터베이스 연결 검증
- [ ] 모델 일관성 검사
- [ ] 에러 핸들링 검증
- [ ] 로깅 시스템 검증

### 3. 프론트엔드 검증
- [ ] 컴포넌트 구조 검사
- [ ] 페이지 라우팅 검증
- [ ] 타입 안정성 검사
- [ ] 미사용 import 제거
- [ ] Props 타입 검증
- [ ] 상태 관리 검증

### 4. 데이터베이스
- [ ] 스키마 무결성 검사
- [ ] 인덱스 최적화
- [ ] 마이그레이션 검증
- [ ] 데이터 일관성 검사

### 5. 코드 품질
- [ ] Lint 에러 수정
- [ ] 타입 에러 수정
- [ ] 미사용 코드 제거
- [ ] 중복 코드 리팩토링
- [ ] 네이밍 일관성 검사

### 6. 성능 최적화
- [ ] API 응답 시간 측정
- [ ] 불필요한 리렌더링 제거
- [ ] 메모이제이션 적용
- [ ] 번들 크기 최적화

### 7. 보안 검사
- [ ] API 토큰 보안 검증
- [ ] SQL 인젝션 방지 확인
- [ ] CORS 설정 검증
- [ ] 입력 검증 강화

### 8. 문서화
- [ ] API 문서 업데이트
- [ ] 컴포넌트 문서 작성
- [ ] 사용자 가이드 업데이트
- [ ] 개발자 가이드 작성

### 9. 테스트
- [ ] 단위 테스트 작성
- [ ] 통합 테스트 작성
- [ ] E2E 테스트 시나리오
- [ ] 회사 추가 플로우 테스트

### 10. 배포 준비
- [ ] 환경 변수 설정
- [ ] 프로덕션 빌드 테스트
- [ ] 배포 스크립트 작성
- [ ] 롤백 계획 수립

---

## 📊 검사 체크리스트

### Phase 1: 구조 분석 (30분)
```
✓ 파일 인벤토리 작성
✓ 디렉토리 구조 검증
✓ 의존성 매핑
✓ 중복 파일 식별
```

### Phase 2: 백엔드 검증 (1시간)
```
□ API 엔드포인트 목록 작성
□ 각 엔드포인트 테스트
□ 데이터베이스 쿼리 검증
□ 에러 핸들링 검증
□ 로그 시스템 검증
```

### Phase 3: 프론트엔드 검증 (1시간)
```
□ 컴포넌트 목록 작성
□ 페이지 라우팅 테스트
□ 타입 에러 수정
□ Lint 에러 수정
□ 미사용 import 제거
```

### Phase 4: 통합 검증 (30분)
```
□ 전체 플로우 테스트
□ 회사 추가 테스트
□ 웹훅 발송 테스트
□ 로그 확인 테스트
```

### Phase 5: 최적화 (1시간)
```
□ 성능 병목 식별
□ 코드 리팩토링
□ 번들 크기 최적화
□ API 응답 최적화
```

### Phase 6: 문서화 (30분)
```
□ README 업데이트
□ API 문서 완성
□ 사용자 가이드 작성
□ 개발자 가이드 작성
```

---

## 🔍 검사 항목 상세

### 1. 파일 인벤토리
```bash
# 백엔드 파일
python-backend/
├── api/ (몇 개?)
├── core/ (몇 개?)
├── database/ (몇 개?)
├── models/ (몇 개?)
└── scripts/ (몇 개?)

# 프론트엔드 파일
src/
├── components/ (몇 개?)
├── pages/ (몇 개?)
├── services/ (몇 개?)
└── types/ (몇 개?)
```

### 2. API 엔드포인트 검증
```
□ /api/companies (8개 엔드포인트)
□ /api/webhook-manager (10개+ 엔드포인트)
□ /api/services
□ /api/system
□ /api/logs
□ /api/config
□ /api/diagnostics
□ /api/posco (레거시)
```

### 3. 컴포넌트 검증
```
□ CompanySelector
□ CompanyManager
□ CompanyForm
□ WebhookManager
□ Services
□ Dashboard
□ Logs
□ Settings
□ ConfigManager
```

### 4. 데이터베이스 검증
```
□ companies 테이블
□ webhook_configs 테이블
□ api_configs 테이블
□ webhook_logs 테이블
□ 인덱스 최적화
□ 외래 키 제약조건
```

---

## 🎯 우선순위

### 높음 (즉시)
1. **Lint 에러 수정** (타입 안정성)
2. **API 엔드포인트 검증** (작동 확인)
3. **라우팅 검증** (페이지 접근)
4. **데이터베이스 무결성** (데이터 손실 방지)

### 중간 (1일 내)
5. **미사용 코드 제거**
6. **중복 코드 리팩토링**
7. **성능 최적화**
8. **에러 핸들링 개선**

### 낮음 (1주 내)
9. **테스트 작성**
10. **문서화 완성**
11. **배포 준비**

---

## 📝 검사 결과 보고서 형식

### 각 단계별 보고서
```markdown
# Phase X 검사 결과

## 발견된 문제
1. [심각] 문제 설명
2. [경고] 문제 설명
3. [정보] 개선 사항

## 수정 내역
- ✅ 수정 1
- ✅ 수정 2

## 남은 작업
- [ ] 작업 1
- [ ] 작업 2
```

---

## 🚀 시작 순서

### Step 1: 프로젝트 구조 분석 (진행 중)
```bash
# 파일 개수 세기
find python-backend -name "*.py" | wc -l
find src -name "*.tsx" -o -name "*.ts" | wc -l

# 디렉토리 구조 출력
tree -L 3 -I "node_modules|venv|__pycache__"
```

### Step 2: 백엔드 검증
```bash
# API 엔드포인트 목록
curl http://localhost:8000/openapi.json | jq '.paths | keys'

# 각 엔드포인트 테스트
curl http://localhost:8000/api/companies
curl http://localhost:8000/api/webhook-manager/stats
```

### Step 3: 프론트엔드 검증
```bash
# TypeScript 타입 체크
npm run type-check

# Lint 검사
npm run lint

# 빌드 테스트
npm run build
```

### Step 4: 데이터베이스 검증
```bash
# 테이블 구조 확인
sqlite3 python-backend/watchhamster.db ".schema"

# 데이터 확인
sqlite3 python-backend/watchhamster.db "SELECT * FROM companies;"
```

---

## 🎯 예상 결과

### 발견될 가능성이 높은 문제
1. **미사용 import** (많음)
2. **타입 에러** (일부)
3. **중복 코드** (POSCO 전용 vs 멀티 테넌트)
4. **레거시 API** (정리 필요)
5. **문서 불일치** (업데이트 필요)

### 최적화 목표
- ✅ Lint 에러: 0개
- ✅ 타입 에러: 0개
- ✅ 미사용 파일: 정리
- ✅ 번들 크기: 최소화
- ✅ API 응답: < 100ms

---

## 📅 예상 소요 시간

- **Phase 1-4**: 3-4시간 (검증)
- **Phase 5**: 1-2시간 (최적화)
- **Phase 6**: 1시간 (문서화)
- **총**: 5-7시간

---

## 🎉 완료 기준

### 모든 항목이 ✅ 상태
1. ✅ Lint 에러 0개
2. ✅ 타입 에러 0개
3. ✅ 모든 API 작동
4. ✅ 모든 페이지 접근 가능
5. ✅ 데이터베이스 무결성
6. ✅ 문서 최신화
7. ✅ 테스트 통과

**검사 시작!** 🚀
