# WatchHamster ì›¹í›… ì‹œìŠ¤í…œ í†µí•© ì‘ì—… ëª…ì„¸ì„œ

## ğŸ“‹ ì‘ì—… ê°œìš”

**ëª©í‘œ**: WatchHamster_Projectì˜ ì›ë³¸ ì›¹í›… ë¡œì§ì„ WatchHamster_Project_GUI_Tauri_WindSurf_So4.5ì— ì™„ì „íˆ í†µí•©

**ì‘ì—…ì¼**: 2025-10-04  
**ìš°ì„ ìˆœìœ„**: HIGH  
**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 4-6ì‹œê°„

---

## ğŸ” í˜„í™© ë¶„ì„

### ì›ë³¸ í”„ë¡œì íŠ¸ (WatchHamster_Project)
**ê²½ë¡œ**: `/Users/jy_lee/Desktop/GIT_DEV/infomax_api/Monitoring/WatchHamster_Project/Posco_News_Mini_Final/core/`

**í•µì‹¬ íŒŒì¼**:
- âœ… `webhook_sender.py` (34,427 bytes) - ì™„ì „í•œ ì›¹í›… ì „ì†¡ ì‹œìŠ¤í…œ
- âœ… `news_message_generator.py` (59,170 bytes) - ë©”ì‹œì§€ ìƒì„± ë¡œì§
- âœ… `integrated_api_module.py` (18,525 bytes) - API í†µí•© ëª¨ë“ˆ
- âœ… `environment_setup.py` (7,617 bytes) - í™˜ê²½ ì„¤ì •

**ì£¼ìš” ê¸°ëŠ¥**:
1. **8ê°€ì§€ ë©”ì‹œì§€ íƒ€ì…** ì§€ì›
   - ì˜ì—…ì¼ ë¹„êµ ë¶„ì„ (business_day_comparison)
   - ì§€ì—° ë°œí–‰ ì•Œë¦¼ (delay_notification)
   - ì¼ì¼ í†µí•© ë¦¬í¬íŠ¸ (daily_report)
   - ì •ì‹œ ë°œí–‰ ì•Œë¦¼ (status_notification)
   - ë°ì´í„° ê°±ì‹  ì—†ìŒ (no_data_notification)
   - ì›Œì¹˜í–„ìŠ¤í„° ì˜¤ë¥˜ (watchhamster_error)
   - ì›Œì¹˜í–„ìŠ¤í„° ìƒíƒœ (watchhamster_status)
   - í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ (test)

2. **ì™„ì „í•œ ë©”ì‹œì§€ í…œí”Œë¦¿ ì—”ì§„**
   - ë™ì  ë©”ì‹œì§€ ìƒì„±
   - ì‹œê°„ ê¸°ë°˜ ìƒíƒœ íŒë‹¨
   - íŠ¸ë¦¬ êµ¬ì¡° ë©”ì‹œì§€ í¬ë§·íŒ…
   - ì´ëª¨ì§€ ë° ìƒ‰ìƒ ì½”ë“œ ê´€ë¦¬

3. **ìš°ì„ ìˆœìœ„ í ì‹œìŠ¤í…œ**
   - CRITICAL, HIGH, NORMAL, LOW ìš°ì„ ìˆœìœ„
   - ìë™ ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜
   - ì¤‘ë³µ ë©”ì‹œì§€ ë°©ì§€

4. **Dooray ì›¹í›… í†µí•©**
   - ì‹¤ì œ ì›¹í›… URL ì„¤ì •
   - BOT í”„ë¡œí•„ ì´ë¯¸ì§€
   - ì±„ë„ë³„ ë¼ìš°íŒ…

### ìƒˆ í”„ë¡œì íŠ¸ (WatchHamster_Project_GUI_Tauri_WindSurf_So4.5)
**ê²½ë¡œ**: `/Users/jy_lee/Desktop/GIT_DEV/infomax_api/Monitoring/WatchHamster_Project_GUI_Tauri_WindSurf_So4.5/python-backend/`

**í˜„ì¬ ìƒíƒœ**:
- âš ï¸ `api/webhooks.py` - ë”ë¯¸ í…œí”Œë¦¿ë§Œ ì¡´ì¬
- âš ï¸ `api/webhook_manager.py` - API ì—”ë“œí¬ì¸íŠ¸ëŠ” ìˆìœ¼ë‚˜ ì‹¤ì œ ë¡œì§ ë¯¸ì—°ê²°
- âš ï¸ `core/posco_original/webhook_sender.py` - ì›ë³¸ ë³µì‚¬ë³¸ ì¡´ì¬í•˜ë‚˜ APIì™€ ë¯¸ì—°ê²°
- âš ï¸ `core/posco_original/news_message_generator.py` - íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ í•„ìš”

**ë¬¸ì œì **:
1. API ì—”ë“œí¬ì¸íŠ¸ê°€ ë”ë¯¸ ë°ì´í„° ë°˜í™˜
2. ì‹¤ì œ ë©”ì‹œì§€ ìƒì„± ë¡œì§ ë¯¸ì—°ê²°
3. ë°ì´í„°ë² ì´ìŠ¤ ë¡œê¹… ë¶ˆì™„ì „
4. í…œí”Œë¦¿ ì—”ì§„ ë¯¸ì‘ë™

---

## ğŸ¯ ì‘ì—… ë²”ìœ„

### Phase 1: ì›ë³¸ íŒŒì¼ ì™„ì „ ë³µì‚¬ ë° ê²½ë¡œ ìˆ˜ì •
**ëŒ€ìƒ íŒŒì¼**:
1. `news_message_generator.py` (59,170 bytes)
   - ì›ë³¸: `WatchHamster_Project/Posco_News_Mini_Final/core/news_message_generator.py`
   - ëŒ€ìƒ: `WatchHamster_Project_GUI_Tauri_WindSurf_So4.5/python-backend/core/posco_original/news_message_generator.py`
   - ì‘ì—…: import ê²½ë¡œ ìˆ˜ì •, ì˜ì¡´ì„± í™•ì¸

2. `integrated_api_module.py` (18,525 bytes)
   - ì›ë³¸: `WatchHamster_Project/Posco_News_Mini_Final/core/integrated_api_module.py`
   - ëŒ€ìƒ: `WatchHamster_Project_GUI_Tauri_WindSurf_So4.5/python-backend/core/posco_original/integrated_api_module.py`
   - ì‘ì—…: API í‚¤ ê´€ë¦¬, í™˜ê²½ ë³€ìˆ˜ í†µí•©

3. `environment_setup.py` (7,617 bytes)
   - ì›ë³¸: `WatchHamster_Project/Posco_News_Mini_Final/core/environment_setup.py`
   - ëŒ€ìƒ: `WatchHamster_Project_GUI_Tauri_WindSurf_So4.5/python-backend/core/posco_original/environment_setup.py`
   - ì‘ì—…: ê²½ë¡œ ì„¤ì • ì—…ë°ì´íŠ¸

### Phase 2: API ì—”ë“œí¬ì¸íŠ¸ ì‹¤ì œ ë¡œì§ ì—°ê²°
**ìˆ˜ì • ëŒ€ìƒ**: `api/webhook_manager.py`

**ë³€ê²½ ì‚¬í•­**:
1. **ë”ë¯¸ ë°ì´í„° ì œê±°**
   ```python
   # ì œê±°: webhook_logs = []
   # ì¶”ê°€: ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ
   ```

2. **ì‹¤ì œ ë©”ì‹œì§€ ìƒì„±ê¸° ì—°ê²°**
   ```python
   # í˜„ì¬: generator = get_message_generator() (None ë°˜í™˜ ê°€ëŠ¥)
   # ë³€ê²½: í•­ìƒ ìœ íš¨í•œ generator ì¸ìŠ¤í„´ìŠ¤ ë³´ì¥
   ```

3. **ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ ì‹¤ì œ êµ¬í˜„**
   - `/send/test` âœ… (ì´ë¯¸ êµ¬í˜„ë¨)
   - `/send/business-day-comparison` âš ï¸ (êµ¬í˜„ í•„ìš”)
   - `/send/delay-notification` âš ï¸ (êµ¬í˜„ í•„ìš”)
   - `/send/daily-report` âš ï¸ (êµ¬í˜„ í•„ìš”)
   - `/send/status-notification` âš ï¸ (êµ¬í˜„ í•„ìš”)
   - `/send/no-data-notification` âš ï¸ (êµ¬í˜„ í•„ìš”)
   - `/send/watchhamster-error` âš ï¸ (êµ¬í˜„ í•„ìš”)
   - `/send/watchhamster-status` âš ï¸ (êµ¬í˜„ í•„ìš”)

### Phase 3: ë°ì´í„°ë² ì´ìŠ¤ ë¡œê¹… í†µí•©
**ìˆ˜ì • ëŒ€ìƒ**: `database/` ëª¨ë“ˆ

**ì‘ì—…**:
1. ì›¹í›… ë¡œê·¸ ìŠ¤í‚¤ë§ˆ í™•ì¸
2. `save_webhook_log()` í•¨ìˆ˜ ì™„ì „ êµ¬í˜„
3. ë¡œê·¸ ì¡°íšŒ API ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
4. í†µê³„ ì§‘ê³„ ë¡œì§ êµ¬í˜„

### Phase 4: í…œí”Œë¦¿ ì‹œìŠ¤í…œ í†µí•©
**ìˆ˜ì • ëŒ€ìƒ**: `api/webhooks.py`

**ì‘ì—…**:
1. ë”ë¯¸ í…œí”Œë¦¿ ì œê±°
2. `NewsMessageGenerator`ì˜ ì‹¤ì œ í…œí”Œë¦¿ ì‚¬ìš©
3. í…œí”Œë¦¿ ë³€ìˆ˜ ìë™ ì¶”ì¶œ ë¡œì§ ê°œì„ 
4. í…œí”Œë¦¿ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ êµ¬í˜„

---

## ğŸ“ ìƒì„¸ ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… Phase 1: íŒŒì¼ ë³µì‚¬ ë° ê²½ë¡œ ìˆ˜ì •

- [ ] **1.1** `news_message_generator.py` ë³µì‚¬
  - [ ] íŒŒì¼ ë³µì‚¬ ì‹¤í–‰
  - [ ] import ê²½ë¡œ ìˆ˜ì • (ìƒëŒ€ ê²½ë¡œ â†’ ì ˆëŒ€ ê²½ë¡œ)
  - [ ] ì˜ì¡´ì„± íŒŒì¼ í™•ì¸ (`integrated_news_parser`, `news_data_parser`)
  - [ ] í…ŒìŠ¤íŠ¸ ì‹¤í–‰

- [ ] **1.2** `integrated_api_module.py` ë³µì‚¬
  - [ ] íŒŒì¼ ë³µì‚¬ ì‹¤í–‰
  - [ ] API í‚¤ í™˜ê²½ ë³€ìˆ˜ í™•ì¸
  - [ ] í…ŒìŠ¤íŠ¸ ì‹¤í–‰

- [ ] **1.3** `environment_setup.py` ë³µì‚¬
  - [ ] íŒŒì¼ ë³µì‚¬ ì‹¤í–‰
  - [ ] ê²½ë¡œ ì„¤ì • ì—…ë°ì´íŠ¸
  - [ ] í…ŒìŠ¤íŠ¸ ì‹¤í–‰

- [ ] **1.4** ì˜ì¡´ì„± íŒŒì¼ í™•ì¸
  - [ ] `integrated_news_parser.py` ì¡´ì¬ í™•ì¸
  - [ ] `news_data_parser.py` ì¡´ì¬ í™•ì¸
  - [ ] `ai_analysis_engine.py` ì¡´ì¬ í™•ì¸
  - [ ] ëˆ„ë½ëœ íŒŒì¼ ë³µì‚¬

### âœ… Phase 2: API ì—”ë“œí¬ì¸íŠ¸ ì—°ê²°

- [ ] **2.1** `webhook_manager.py` ìˆ˜ì •
  - [ ] `get_message_generator()` í•¨ìˆ˜ ê°œì„ 
  - [ ] ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”
  - [ ] ë¡œê¹… ì¶”ê°€

- [ ] **2.2** ê° ì—”ë“œí¬ì¸íŠ¸ ì‹¤ì œ êµ¬í˜„
  - [ ] `/send/business-day-comparison`
    - [ ] ìš”ì²­ ë°ì´í„° ê²€ì¦
    - [ ] `NewsMessageGenerator.generate_business_day_comparison_message()` í˜¸ì¶œ
    - [ ] ì‘ë‹µ í¬ë§· í‘œì¤€í™”
  
  - [ ] `/send/delay-notification`
    - [ ] ìš”ì²­ ë°ì´í„° ê²€ì¦
    - [ ] `NewsMessageGenerator.generate_delay_notification_message()` í˜¸ì¶œ
    - [ ] ì‘ë‹µ í¬ë§· í‘œì¤€í™”
  
  - [ ] `/send/daily-report`
    - [ ] ìš”ì²­ ë°ì´í„° ê²€ì¦
    - [ ] `NewsMessageGenerator.generate_daily_integrated_report_message()` í˜¸ì¶œ
    - [ ] ì‘ë‹µ í¬ë§· í‘œì¤€í™”
  
  - [ ] `/send/status-notification`
    - [ ] ìš”ì²­ ë°ì´í„° ê²€ì¦
    - [ ] `NewsMessageGenerator.generate_status_notification_message()` í˜¸ì¶œ
    - [ ] ì‘ë‹µ í¬ë§· í‘œì¤€í™”
  
  - [ ] `/send/no-data-notification`
    - [ ] ìš”ì²­ ë°ì´í„° ê²€ì¦
    - [ ] `NewsMessageGenerator.generate_no_data_notification_message()` í˜¸ì¶œ
    - [ ] ì‘ë‹µ í¬ë§· í‘œì¤€í™”

- [ ] **2.3** ì—ëŸ¬ ì²˜ë¦¬ í†µí•©
  - [ ] ë©”ì‹œì§€ ìƒì„± ì‹¤íŒ¨ ì‹œ ì²˜ë¦¬
  - [ ] ì›¹í›… ì „ì†¡ ì‹¤íŒ¨ ì‹œ ì²˜ë¦¬
  - [ ] ì¬ì‹œë„ ë¡œì§ í™•ì¸

### âœ… Phase 3: ë°ì´í„°ë² ì´ìŠ¤ ë¡œê¹…

- [ ] **3.1** ë¡œê·¸ ìŠ¤í‚¤ë§ˆ í™•ì¸
  - [ ] `webhook_logs` í…Œì´ë¸” êµ¬ì¡° í™•ì¸
  - [ ] í•„ìš”í•œ ì»¬ëŸ¼ ì¶”ê°€

- [ ] **3.2** `save_webhook_log()` êµ¬í˜„
  - [ ] ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
  - [ ] ë¡œê·¸ ì €ì¥ ë¡œì§ êµ¬í˜„
  - [ ] ì—ëŸ¬ í•¸ë“¤ë§

- [ ] **3.3** ë¡œê·¸ ì¡°íšŒ API êµ¬í˜„
  - [ ] `/logs` ì—”ë“œí¬ì¸íŠ¸ ì‹¤ì œ DB ì—°ê²°
  - [ ] `/logs/{log_id}` ì—”ë“œí¬ì¸íŠ¸ ì‹¤ì œ DB ì—°ê²°
  - [ ] í•„í„°ë§ ë° í˜ì´ì§€ë„¤ì´ì…˜

- [ ] **3.4** í†µê³„ API êµ¬í˜„
  - [ ] `/stats` ì—”ë“œí¬ì¸íŠ¸ ì‹¤ì œ DB ì—°ê²°
  - [ ] ì§‘ê³„ ì¿¼ë¦¬ ìµœì í™”

### âœ… Phase 4: í…œí”Œë¦¿ ì‹œìŠ¤í…œ

- [ ] **4.1** `api/webhooks.py` ìˆ˜ì •
  - [ ] ë”ë¯¸ í…œí”Œë¦¿ ì œê±°
  - [ ] `NewsMessageGenerator` í…œí”Œë¦¿ ì‚¬ìš©

- [ ] **4.2** í…œí”Œë¦¿ ë¯¸ë¦¬ë³´ê¸° êµ¬í˜„
  - [ ] `/message-types/{message_type_id}/detail` ê°œì„ 
  - [ ] ì‹¤ì œ ìƒì„±ëœ ë©”ì‹œì§€ í‘œì‹œ

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
1. **ë©”ì‹œì§€ ìƒì„± í…ŒìŠ¤íŠ¸**
   - [ ] ê° ë©”ì‹œì§€ íƒ€ì…ë³„ ìƒì„± í…ŒìŠ¤íŠ¸
   - [ ] ì—ëŸ¬ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸
   - [ ] í…œí”Œë¦¿ ë³€ìˆ˜ ì¹˜í™˜ í…ŒìŠ¤íŠ¸

2. **ì›¹í›… ì „ì†¡ í…ŒìŠ¤íŠ¸**
   - [ ] ì‹¤ì œ Dooray ì›¹í›… ì „ì†¡ í…ŒìŠ¤íŠ¸
   - [ ] ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ í…ŒìŠ¤íŠ¸
   - [ ] ìš°ì„ ìˆœìœ„ í í…ŒìŠ¤íŠ¸

3. **ë°ì´í„°ë² ì´ìŠ¤ í…ŒìŠ¤íŠ¸**
   - [ ] ë¡œê·¸ ì €ì¥ í…ŒìŠ¤íŠ¸
   - [ ] ë¡œê·¸ ì¡°íšŒ í…ŒìŠ¤íŠ¸
   - [ ] í†µê³„ ì§‘ê³„ í…ŒìŠ¤íŠ¸

### í†µí•© í…ŒìŠ¤íŠ¸
1. **ì „ì²´ í”Œë¡œìš° í…ŒìŠ¤íŠ¸**
   - [ ] API ìš”ì²­ â†’ ë©”ì‹œì§€ ìƒì„± â†’ ì›¹í›… ì „ì†¡ â†’ ë¡œê·¸ ì €ì¥
   - [ ] ì—ëŸ¬ ë°œìƒ ì‹œ ë³µêµ¬ í…ŒìŠ¤íŠ¸
   - [ ] ë™ì‹œ ìš”ì²­ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸

2. **UI ì—°ë™ í…ŒìŠ¤íŠ¸**
   - [ ] í”„ë¡ íŠ¸ì—”ë“œì—ì„œ API í˜¸ì¶œ í…ŒìŠ¤íŠ¸
   - [ ] ë¡œê·¸ ì¡°íšŒ UI í…ŒìŠ¤íŠ¸
   - [ ] í†µê³„ ëŒ€ì‹œë³´ë“œ í…ŒìŠ¤íŠ¸

---

## ğŸš¨ ì£¼ì˜ì‚¬í•­

1. **API í‚¤ ë³´ì•ˆ**
   - ì›¹í›… URLì€ í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬
   - ì½”ë“œì— í•˜ë“œì½”ë”© ê¸ˆì§€

2. **í•˜ìœ„ í˜¸í™˜ì„±**
   - ê¸°ì¡´ API ì—”ë“œí¬ì¸íŠ¸ ìœ ì§€
   - ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜

3. **ì—ëŸ¬ ì²˜ë¦¬**
   - ëª¨ë“  ì™¸ë¶€ í˜¸ì¶œì— try-catch
   - ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€

4. **ë¡œê¹…**
   - ëª¨ë“  ì£¼ìš” ì‘ì—… ë¡œê¹…
   - ë””ë²„ê¹… ì •ë³´ í¬í•¨

---

## ğŸ“Š ì§„í–‰ ìƒí™© ì¶”ì 

| Phase | ì‘ì—… | ìƒíƒœ | ì™„ë£Œì¼ | ë¹„ê³  |
|-------|------|------|--------|------|
| 1 | íŒŒì¼ ë³µì‚¬ ë° ê²½ë¡œ ìˆ˜ì • | â³ ëŒ€ê¸° | - | - |
| 2 | API ì—”ë“œí¬ì¸íŠ¸ ì—°ê²° | â³ ëŒ€ê¸° | - | - |
| 3 | ë°ì´í„°ë² ì´ìŠ¤ ë¡œê¹… í†µí•© | â³ ëŒ€ê¸° | - | - |
| 4 | í…œí”Œë¦¿ ì‹œìŠ¤í…œ í†µí•© | â³ ëŒ€ê¸° | - | - |
| 5 | í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ | â³ ëŒ€ê¸° | - | - |

---

## ğŸ“š ì°¸ê³  ìë£Œ

- ì›ë³¸ í”„ë¡œì íŠ¸: `/Users/jy_lee/Desktop/GIT_DEV/infomax_api/Monitoring/WatchHamster_Project/`
- ìƒˆ í”„ë¡œì íŠ¸: `/Users/jy_lee/Desktop/GIT_DEV/infomax_api/Monitoring/WatchHamster_Project_GUI_Tauri_WindSurf_So4.5/`
- ì»¤ë°‹ í•´ì‹œ: `a763ef84be08b5b1dab0c0ba20594b141baec7ab`

---

## âœ… ì™„ë£Œ ê¸°ì¤€

1. âœ… ëª¨ë“  ì›¹í›… API ì—”ë“œí¬ì¸íŠ¸ê°€ ì‹¤ì œ ë¡œì§ê³¼ ì—°ê²°ë¨
2. âœ… ë©”ì‹œì§€ ìƒì„±ì´ ì›ë³¸ê³¼ ë™ì¼í•˜ê²Œ ì‘ë™í•¨
3. âœ… ë°ì´í„°ë² ì´ìŠ¤ ë¡œê¹…ì´ ì •ìƒ ì‘ë™í•¨
4. âœ… ëª¨ë“  ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í†µê³¼
5. âœ… í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼
6. âœ… UIì—ì„œ ì •ìƒ ì‘ë™ í™•ì¸

---

**ì‘ì„±ì**: Cascade AI  
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-10-04
