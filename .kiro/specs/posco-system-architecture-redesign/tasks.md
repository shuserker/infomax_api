# Implementation Plan

- [x] 1. 워치햄스터 핵심 컴포넌트 구현
  - ProcessManager, ModuleRegistry, NotificationManager 클래스 구현
  - 기존 워치햄스터 코드와 통합하여 새로운 아키텍처 적용
  - 기존 알림 텍스트 내용은 완전히 보존
  - _Requirements: 1.1, 2.1, 4.1_

- [x] 1.1 ProcessManager 클래스 구현
  - 하위 프로세스 시작/중지/재시작 기능 구현
  - 프로세스 상태 모니터링 및 헬스체크 로직 작성
  - 기존 monitor_WatchHamster.py의 프로세스 관리 코드를 ProcessManager로 리팩토링
  - _Requirements: 1.2, 2.2_

- [x] 1.2 ModuleRegistry 클래스 구현
  - JSON 기반 모듈 설정 시스템 구현
  - 동적 모듈 등록/해제 기능 작성
  - modules.json 설정 파일 구조 정의 및 기본 모듈 등록
  - _Requirements: 5.1, 5.2_

- [x] 1.3 NotificationManager 클래스 구현
  - 기존 send_notification 함수를 NotificationManager로 이전
  - 알림 템플릿 시스템 구현 (기존 텍스트 내용 완전 보존)
  - 다양한 알림 타입별 메서드 분리 (시작/상태/오류/복구 알림)
  - _Requirements: 4.2, 4.3, 4.4_

- [x] 2. 워치햄스터 메인 클래스 리팩토링
  - PoscoMonitorWatchHamster 클래스를 새로운 아키텍처에 맞게 수정
  - 새로운 컴포넌트들과 통합하여 전체 시스템 관리 로직 구현
  - 기존 기능 유지하면서 새로운 프로세스 관리 기능 추가
  - _Requirements: 1.3, 2.3_

- [x] 2.1 워치햄스터 초기화 로직 개선
  - __init__ 메서드에서 새로운 컴포넌트들 초기화
  - 기존 상태 로드 및 설정 관리 로직 개선
  - 모듈 레지스트리에서 관리 대상 프로세스 목록 자동 로드
  - _Requirements: 1.1, 5.1_

- [x] 2.2 프로세스 관리 메서드 구현
  - start_all_processes, stop_all_processes 메서드 구현
  - 개별 프로세스 제어 메서드 (restart_process, get_process_status) 구현
  - 기존 모니터링 로직과 새로운 프로세스 관리 로직 통합
  - _Requirements: 1.2, 2.1_

- [x] 2.3 헬스체크 및 자동 복구 로직 개선
  - 3단계 지능적 복구 로직 구현 (즉시/5분후/최종 재시도)
  - 프로세스별 개별 헬스체크 및 통합 상태 관리
  - 복구 실패 시 프로세스 비활성화 및 긴급 알림 로직
  - _Requirements: 6.1, 6.2, 6.3, 6.4_

- [x] 3. 기본 모듈 설정 파일 생성
  - modules.json 파일 생성 및 기존 시스템 모듈들 등록
  - posco_main_notifier, realtime_news_monitor 등 기존 모듈 설정
  - 각 모듈별 의존성, 재시작 정책, 헬스체크 간격 설정
  - _Requirements: 5.1, 5.3_

- [x] 3.1 posco_main_notifier 모듈 설정
  - 메인 뉴스 알림 시스템을 모듈 레지스트리에 등록
  - 자동 시작, 재시작 정책, 헬스체크 설정 정의
  - 기존 posco_main_notifier.py 파일과의 호환성 확보
  - _Requirements: 1.2, 2.1_

- [x] 3.2 기타 모니터링 모듈 설정
  - realtime_news_monitor, integrated_report_scheduler 등 등록
  - historical_data_collector 및 기타 확장 모듈 설정
  - 모듈 간 의존성 관계 정의 및 시작 순서 설정
  - _Requirements: 2.1, 5.1_

- [x] 4. 제어센터 스크립트 수정
  - posco_control_center.sh를 새로운 아키텍처에 맞게 수정
  - 워치햄스터 중심의 메뉴 구조로 변경
  - 개별 모듈 직접 실행 방지 및 워치햄스터 우선 실행 로직
  - _Requirements: 3.1, 3.2, 3.3_

- [x] 4.1 메뉴 구조 재설계
  - "워치햄스터 관리" 섹션을 최상위로 이동
  - "개별 모듈 관리" 섹션을 고급 옵션으로 분리
  - 워치햄스터 실행 상태 확인 후 개별 모듈 접근 제한
  - _Requirements: 3.1, 3.4_

- [x] 4.2 워치햄스터 시작 함수 구현
  - start_watchhamster 함수를 새로운 아키텍처에 맞게 수정
  - 환경 체크, 기존 프로세스 정리, 워치햄스터 시작 로직
  - 시스템 초기화 대기 및 전체 상태 확인 기능
  - _Requirements: 1.1, 7.2_

- [x] 4.3 상태 확인 및 제어 함수 구현
  - 워치햄스터 상태 확인 함수 구현
  - 개별 모듈 상태 조회 및 제어 함수 구현
  - 제어센터-워치햄스터 간 통신 오류 처리 로직
  - _Requirements: 7.1, 7.3_

- [x] 5. 통합 테스트 및 검증
  - 새로운 아키텍처의 전체 시스템 테스트
  - 기존 기능 호환성 확인 및 알림 텍스트 보존 검증
  - 프로세스 관리, 자동 복구, 알림 시스템 통합 테스트
  - _Requirements: 1.4, 2.4, 4.1_

- [x] 5.1 기본 기능 테스트
  - 워치햄스터 시작/중지/재시작 기능 테스트
  - 하위 프로세스 자동 시작 및 관리 기능 테스트
  - 기존 알림 텍스트 내용이 변경되지 않았는지 확인
  - _Requirements: 1.1, 1.2, 4.1_

- [x] 5.2 자동 복구 시나리오 테스트
  - 프로세스 크래시 시 3단계 복구 로직 테스트
  - 복구 실패 시 긴급 알림 및 프로세스 비활성화 테스트
  - Git 업데이트 시 전체 시스템 재시작 테스트
  - _Requirements: 6.1, 6.2, 6.3_

- [x] 5.3 제어센터 통합 테스트
  - 제어센터에서 워치햄스터 제어 기능 테스트
  - 개별 모듈 관리 기능 및 접근 제한 테스트
  - 오류 상황에서의 피드백 및 복구 안내 테스트
  - _Requirements: 7.1, 7.2, 7.3_

- [x] 6. 문서화 및 배포 준비
  - 새로운 아키텍처 사용법 문서 작성
  - 기존 시스템에서 새 시스템으로의 마이그레이션 가이드 작성
  - 모듈 개발자를 위한 모듈 등록 가이드 작성
  - _Requirements: 5.2, 5.4_

- [x] 6.1 사용자 가이드 작성
  - 새로운 제어센터 사용법 가이드
  - 워치햄스터 상태 확인 및 문제 해결 가이드
  - 알림 시스템 이해 및 활용 가이드
  - _Requirements: 3.1, 4.1_

- [x] 6.2 개발자 가이드 작성
  - 새로운 모듈 개발 및 등록 가이드
  - ModuleRegistry 설정 방법 및 예제
  - 워치햄스터 확장 및 커스터마이징 가이드
  - _Requirements: 5.1, 5.2, 5.4_

- [x] 6.3 마이그레이션 스크립트 작성
  - 기존 시스템 설정을 새 시스템으로 자동 변환하는 스크립트
  - 기존 로그 및 상태 파일 호환성 확보
  - 롤백 기능 및 안전한 배포 절차 구현
  - _Requirements: 1.1, 2.1_