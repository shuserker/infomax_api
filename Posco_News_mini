import requests
from requests.auth import HTTPBasicAuth

URL  = "https://dev-global-api.einfomax.co.kr/apis/posco/news"
USER = "infomax"
PWD  = "infomax!"

try:
    print(f"ìš”ì²­ URL: {URL}")
    print(f"ì‚¬ìš©ì: {USER}")
    
    resp = requests.get(URL,
                        auth=HTTPBasicAuth(USER, PWD),
                        timeout=5)
    
    print(f"ì‘ë‹µ ìƒíƒœ ì½”ë“œ: {resp.status_code}")
    resp.raise_for_status()
    
    data = resp.json()
    
    # ì›ë³¸ JSON êµ¬ì¡° í™•ì¸
    print("=== ì›ë³¸ JSON êµ¬ì¡° ===")
    import json
    print(json.dumps(data, ensure_ascii=False, indent=2))
    
    print("\n=== í¬ë§·íŒ…ëœ ì¶œë ¥ (ì°¸ê³ ìš©) ===")
    for news_type, news_data in data.items():
        print(f"\nğŸ”¹ [{news_type.upper()}]")
        print("-" * 60)
        print(f"ì œëª©: {news_data['title']}")
        print(f"ë‚ ì§œ: {news_data['date']} {news_data['time']}")
        print(f"ì‘ì„±ì: {', '.join(news_data['writer'])}")
        print(f"ì¹´í…Œê³ ë¦¬: {', '.join(news_data['category'])}")
        print(f"\në‚´ìš© (ì²« 200ì):")
        content = news_data['content'][:200] + "..."
        print(content)
    
except requests.exceptions.RequestException as e:
    print(f"ìš”ì²­ ì˜¤ë¥˜: {e}")
except Exception as e:
    print(f"ê¸°íƒ€ ì˜¤ë¥˜: {e}")