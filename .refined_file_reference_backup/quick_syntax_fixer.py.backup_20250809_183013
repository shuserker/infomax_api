#!/usr/bin/env python3
"""
ë¹ ë¥¸ êµ¬ë¬¸ ìˆ˜ì • ë„êµ¬
Quick Syntax Fixer for Core Modules
"""

import verify_folder_reorganization.py
# BROKEN_REF: from pathlib import Path

def fix_common_syntax_issues():
    """ì¼ë°˜ì ì¸ êµ¬ë¬¸ ë¬¸ì œë“¤ì„ ë¹ ë¥´ê²Œ ìˆ˜ì •"""
    
    core_modules = [
        'naming_convention_manager.py',
        'file_renaming_system.py', 
        'python_naming_standardizer.py',
        'shell_batch_script_standardizer.py',
        'documentation_standardizer.py',
        'config_data_standardizer.py',
        'system_output_message_standardizer.py',
        'folder_structure_reorganizer.py',
        'naming_standardization_verification_system.py'
    ]
    
    for module_name in core_modules:
        module_path = Path(module_name)
        if module_path.exists():
            print(f"ğŸ”§ ìˆ˜ì • ì¤‘: {module_name}")
            fix_file_syntax(module_path)
        else:
            print(f"âš ï¸ íŒŒì¼ ì—†ìŒ: {module_name}")

def fix_file_syntax(file_path: Path):
    """ê°œë³„ íŒŒì¼ì˜ êµ¬ë¬¸ ë¬¸ì œ ìˆ˜ì •"""
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            content = f.read()
        
        original_content = content
        
        # 1. ì˜ëª»ëœ ë°ì½”ë ˆì´í„° ë“¤ì—¬ì“°ê¸° ìˆ˜ì •
        content = re.sub(r'/n    (@/w+)/nclass', r'/n/1/nclass', content)
        
        # 2. ì˜ëª»ëœ í•¨ìˆ˜ ì •ì˜ ë“¤ì—¬ì“°ê¸° ìˆ˜ì •
        content = re.sub(r'/n    (def /w+.*:)/n', r'/n/1/n', content)
        
        # 3. ì˜ëª»ëœ í´ë˜ìŠ¤ ì •ì˜ ë“¤ì—¬ì“°ê¸° ìˆ˜ì •
        content = re.sub(r'/n    (class /w+.*:)/n', r'/n/1/n', content)
        
        # 4. ë¹ˆ í•¨ìˆ˜/í´ë˜ìŠ¤ì— pass ì¶”ê°€
        content = re.sub(r'(def /w+.*:)/n/s*/n/s*(def|/Z|class)', r'/1/n    pass/n/n/2', content)
        content = re.sub(r'(class /w+.*:)/n/s*/n/s*(def|/Z|class)', r'/1/n    pass/n/n/2', content)
        
        # 5. ì˜ëª»ëœ if/else ë“¤ì—¬ì“°ê¸° ìˆ˜ì •
        lines = content.split('/n')
        fixed_lines = []
        
        for i, line in enumerate(lines):
            # ê¸°ë³¸ì ì¸ ë“¤ì—¬ì“°ê¸° ë¬¸ì œ ìˆ˜ì •
            if line.strip().startswith('except') and not line.startswith('    except') and not line.startswith('except'):
                # except êµ¬ë¬¸ì´ ì˜ëª» ë“¤ì—¬ì“°ê¸°ëœ ê²½ìš°
                fixed_lines.append('    ' + line.strip())
            elif line.strip().startswith('finally') and not line.startswith('    finally') and not line.startswith('finally'):
                # finally êµ¬ë¬¸ì´ ì˜ëª» ë“¤ì—¬ì“°ê¸°ëœ ê²½ìš°
                fixed_lines.append('    ' + line.strip())
            else:
                fixed_lines.append(line)
        
        content = '/n'.join(fixed_lines)
        
        # ë³€ê²½ì‚¬í•­ì´ ìˆìœ¼ë©´ ì €ì¥
        if content != original_content:
            with open(file_path, 'w', encoding='utf-8') as f:
                f.write(content)
            print(f"  âœ… {file_path.name} ìˆ˜ì • ì™„ë£Œ")
        else:
            print(f"  â„¹ï¸ {file_path.name} ë³€ê²½ì‚¬í•­ ì—†ìŒ")
            
    except Exception as e:
        print(f"  âŒ {file_path.name} ìˆ˜ì • ì‹¤íŒ¨: {e}")

if __name__ == "__main__":
    print("ğŸš€ ë¹ ë¥¸ êµ¬ë¬¸ ìˆ˜ì • ì‹œì‘")
    fix_common_syntax_issues()
    print("âœ… ë¹ ë¥¸ êµ¬ë¬¸ ìˆ˜ì • ì™„ë£Œ")